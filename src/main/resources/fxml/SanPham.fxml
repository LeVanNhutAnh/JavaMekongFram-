<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.mekongfarm.controller.SanPhamController"
      spacing="15" styleClass="content-page">
    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
    
    <!-- Header vá»›i icon -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ“¦ QUáº¢N LÃ Sáº¢N PHáº¨M" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="lblTongSP" text="0 sáº£n pháº©m" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
    </HBox>
    
    <!-- Thá»‘ng kÃª nhanh -->
    <HBox spacing="15" alignment="CENTER">
        <VBox styleClass="stat-card card-green" alignment="CENTER" spacing="3" prefWidth="140">
            <Label text="ðŸ“Š" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblTongSanPham" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #166534;"/>
            <Label text="Tá»•ng sáº£n pháº©m" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-blue" alignment="CENTER" spacing="3" prefWidth="140">
            <Label text="ðŸ“¦" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblTongTonKho" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
            <Label text="Tá»•ng tá»“n kho" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-orange" alignment="CENTER" spacing="3" prefWidth="140">
            <Label text="âš ï¸" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblTonKhoThap" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #c2410c;"/>
            <Label text="Tá»“n kho tháº¥p" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-purple" alignment="CENTER" spacing="3" prefWidth="140">
            <Label text="ðŸ’°" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblGiaTriKho" text="0 VNÄ" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #7e22ce;"/>
            <Label text="GiÃ¡ trá»‹ kho" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
    </HBox>
    
    <!-- Thanh tÃ¬m kiáº¿m vÃ  cÃ´ng cá»¥ -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f8fafc; -fx-padding: 10; -fx-background-radius: 8;">
        <TextField fx:id="txtTimKiem" promptText="ðŸ” TÃ¬m kiáº¿m sáº£n pháº©m..." prefWidth="280" style="-fx-pref-height: 35px;"/>
        <ComboBox fx:id="cboLoai" promptText="ðŸ“ Lá»c theo loáº¡i" prefWidth="160"/>
        <ComboBox fx:id="cboTinh" promptText="ðŸ“ Lá»c theo tá»‰nh" prefWidth="160"/>
        <Button text="ðŸ”„ LÃ m má»›i" onAction="#lamMoi" styleClass="btn-secondary"/>
        <Button text="ðŸ—‘ï¸ ThÃ¹ng rÃ¡c" onAction="#moThungRac" 
                style="-fx-background-color: #6b7280; -fx-text-fill: white; -fx-background-radius: 5;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“„ PDF" onAction="#xuatPDF" styleClass="btn-export"/>
        <Button text="ðŸ“Š Excel" onAction="#xuatExcel" styleClass="btn-export"/>
        <Button text="âž• ThÃªm sáº£n pháº©m" onAction="#moFormThem" styleClass="btn-primary"/>
    </HBox>
    
    <!-- Báº£ng sáº£n pháº©m -->
    <TableView fx:id="tableSanPham" VBox.vgrow="ALWAYS" styleClass="data-table">
        <columns>
            <TableColumn text="MÃ£ SP" prefWidth="80">
                <cellValueFactory><PropertyValueFactory property="maSP"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="TÃªn sáº£n pháº©m" prefWidth="200">
                <cellValueFactory><PropertyValueFactory property="tenSanPham"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Loáº¡i" prefWidth="100">
                <cellValueFactory><PropertyValueFactory property="tenLoai"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Xuáº¥t xá»©" prefWidth="110">
                <cellValueFactory><PropertyValueFactory property="tenTinh"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="NhÃ  cung cáº¥p" prefWidth="150">
                <cellValueFactory><PropertyValueFactory property="tenNCC"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="ÄÆ¡n giÃ¡" prefWidth="110">
                <cellValueFactory><PropertyValueFactory property="donGiaFormat"/></cellValueFactory>
            </TableColumn>
            <TableColumn text="Tá»“n kho" prefWidth="90">
                <cellValueFactory><PropertyValueFactory property="soLuongHienThi"/></cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="colAction" text="Thao tÃ¡c" prefWidth="140"/>
        </columns>
    </TableView>
    
    <!-- Form thÃªm/sá»­a -->
    <TitledPane fx:id="paneForm" text="ðŸ“ ThÃ´ng tin sáº£n pháº©m" expanded="false" styleClass="form-pane">
        <HBox spacing="20">
            <padding><Insets top="15" right="15" bottom="15" left="15"/></padding>
            
            <!-- Image preview -->
            <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #f1f5f9; -fx-padding: 15; -fx-background-radius: 8;">
                <ImageView fx:id="imgPreview" fitWidth="130" fitHeight="130" preserveRatio="true"/>
                <Button text="ðŸ–¼ï¸ Chá»n áº£nh" onAction="#chonAnh" styleClass="btn-secondary"/>
            </VBox>
            
            <!-- Form fields -->
            <GridPane hgap="15" vgap="12" HBox.hgrow="ALWAYS">
                <Label text="MÃ£ SP:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtMaSP" editable="false" GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="150"/>
                
                <Label text="TÃªn sáº£n pháº©m:" GridPane.columnIndex="2" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtTenSP" GridPane.columnIndex="3" GridPane.rowIndex="0" prefWidth="220"/>
                
                <Label text="Loáº¡i:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="cboLoaiForm" GridPane.columnIndex="1" GridPane.rowIndex="1" prefWidth="150"/>
                
                <Label text="Tá»‰nh:" GridPane.columnIndex="2" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="cboTinhForm" GridPane.columnIndex="3" GridPane.rowIndex="1" prefWidth="220"/>
                
                <Label text="NhÃ  cung cáº¥p:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                <ComboBox fx:id="cboNCC" GridPane.columnIndex="1" GridPane.rowIndex="2" prefWidth="150" promptText="Chá»n NCC..."/>
                
                <Label text="ÄÆ¡n giÃ¡ (VNÄ):" GridPane.columnIndex="2" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtDonGia" GridPane.columnIndex="3" GridPane.rowIndex="2" promptText="50000"/>
                
                <Label text="Sá»‘ lÆ°á»£ng:" GridPane.columnIndex="0" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtSoLuong" GridPane.columnIndex="1" GridPane.rowIndex="3" promptText="100"/>
                
                <Label text="ÄÆ¡n vá»‹:" GridPane.columnIndex="2" GridPane.rowIndex="3" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtDonVi" text="kg" GridPane.columnIndex="3" GridPane.rowIndex="3"/>
                
                <Label text="MÃ´ táº£:" GridPane.columnIndex="0" GridPane.rowIndex="4" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtMoTa" GridPane.columnIndex="3" GridPane.rowIndex="3" promptText="MÃ´ táº£ ngáº¯n..."/>
                
                <HBox spacing="10" GridPane.columnIndex="3" GridPane.rowIndex="4" alignment="CENTER_RIGHT">
                    <Button text="ðŸ’¾ LÆ°u sáº£n pháº©m" onAction="#luuSanPham" styleClass="btn-primary"/>
                    <Button text="âŒ Há»§y" onAction="#huyForm" styleClass="btn-secondary"/>
                </HBox>
            </GridPane>
        </HBox>
    </TitledPane>
</VBox>
