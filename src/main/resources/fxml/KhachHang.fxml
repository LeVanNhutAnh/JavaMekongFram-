<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.mekongfarm.controller.KhachHangController"
      spacing="15" styleClass="content-page">
    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
    
    <!-- Header vá»›i icon -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ‘¥ QUáº¢N LÃ KHÃCH HÃ€NG" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="lblTongKH" text="0 khÃ¡ch hÃ ng" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
    </HBox>
    
    <!-- Thá»‘ng kÃª nhanh -->
    <HBox spacing="15" alignment="CENTER">
        <VBox styleClass="stat-card card-blue" alignment="CENTER" spacing="3" prefWidth="160">
            <Label text="ðŸ‘¥" style="-fx-font-size: 22px;"/>
            <Label fx:id="lblTongKhachHang" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
            <Label text="Tá»•ng khÃ¡ch hÃ ng" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-green" alignment="CENTER" spacing="3" prefWidth="160">
            <Label text="ðŸ›’" style="-fx-font-size: 22px;"/>
            <Label fx:id="lblKHMuaNhieu" text="0" style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #166534;"/>
            <Label text="ÄÃ£ mua hÃ ng" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-purple" alignment="CENTER" spacing="3" prefWidth="160">
            <Label text="ðŸ’°" style="-fx-font-size: 22px;"/>
            <Label fx:id="lblTongDoanhThu" text="0 VNÄ" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #7e22ce;"/>
            <Label text="Doanh thu tá»« KH" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox fx:id="cardCongNo" styleClass="stat-card" alignment="CENTER" spacing="3" prefWidth="160"
              style="-fx-background-color: #fef3c7;">
            <Label text="ðŸ“‹" style="-fx-font-size: 22px;"/>
            <Label fx:id="lblTongCongNo" text="0 VNÄ" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #b45309;"/>
            <Label text="Tá»•ng cÃ´ng ná»£" style="-fx-font-size: 11px; -fx-text-fill: #92400e;"/>
        </VBox>
    </HBox>
    
    <!-- Thanh tÃ¬m kiáº¿m vÃ  cÃ´ng cá»¥ -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f8fafc; -fx-padding: 10; -fx-background-radius: 8;">
        <TextField fx:id="txtTimKiem" promptText="ðŸ” TÃ¬m kiáº¿m tÃªn, SÄT, email..." prefWidth="320" style="-fx-pref-height: 35px;"/>
        <Button text="ðŸ”„ LÃ m má»›i" onAction="#lamMoi" styleClass="btn-secondary"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“„ Xuáº¥t Excel" onAction="#xuatExcel" styleClass="btn-export"/>
        <Button text="âž• ThÃªm khÃ¡ch hÃ ng" onAction="#moFormThem" styleClass="btn-primary"/>
    </HBox>
    
    <!-- Báº£ng khÃ¡ch hÃ ng -->
    <TableView fx:id="tableKhachHang" VBox.vgrow="ALWAYS" styleClass="data-table">
        <columns>
            <TableColumn text="MÃ£ KH" prefWidth="70"><cellValueFactory><PropertyValueFactory property="maKH"/></cellValueFactory></TableColumn>
            <TableColumn text="Há» tÃªn" prefWidth="180"><cellValueFactory><PropertyValueFactory property="hoTen"/></cellValueFactory></TableColumn>
            <TableColumn text="Äá»‹a chá»‰" prefWidth="220"><cellValueFactory><PropertyValueFactory property="diaChi"/></cellValueFactory></TableColumn>
            <TableColumn text="Sá»‘ Ä‘iá»‡n thoáº¡i" prefWidth="130"><cellValueFactory><PropertyValueFactory property="soDienThoai"/></cellValueFactory></TableColumn>
            <TableColumn text="Email" prefWidth="180"><cellValueFactory><PropertyValueFactory property="email"/></cellValueFactory></TableColumn>
            <TableColumn fx:id="colAction" text="Thao tÃ¡c" prefWidth="130"/>
        </columns>
    </TableView>
    
    <!-- Form thÃªm/sá»­a -->
    <TitledPane fx:id="paneForm" text="ðŸ“ ThÃ´ng tin khÃ¡ch hÃ ng" expanded="false" styleClass="form-pane">
        <VBox spacing="15">
            <padding><Insets top="15" right="15" bottom="15" left="15"/></padding>
            
            <GridPane hgap="20" vgap="12">
                <Label text="MÃ£ KH:" GridPane.columnIndex="0" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtMaKH" editable="false" GridPane.columnIndex="1" GridPane.rowIndex="0" prefWidth="150" 
                           style="-fx-background-color: #f1f5f9;"/>
                
                <Label text="Há» tÃªn:" GridPane.columnIndex="2" GridPane.rowIndex="0" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtHoTen" GridPane.columnIndex="3" GridPane.rowIndex="0" prefWidth="250" promptText="Nguyá»…n VÄƒn A"/>
                
                <Label text="Äá»‹a chá»‰:" GridPane.columnIndex="0" GridPane.rowIndex="1" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtDiaChi" GridPane.columnIndex="1" GridPane.rowIndex="1" GridPane.columnSpan="3" 
                           HBox.hgrow="ALWAYS" promptText="Sá»‘ nhÃ , Ä‘Æ°á»ng, phÆ°á»ng/xÃ£, quáº­n/huyá»‡n, tá»‰nh/thÃ nh"/>
                
                <Label text="Sá»‘ Ä‘iá»‡n thoáº¡i:" GridPane.columnIndex="0" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtSDT" GridPane.columnIndex="1" GridPane.rowIndex="2" promptText="0901234567"/>
                
                <Label text="Email:" GridPane.columnIndex="2" GridPane.rowIndex="2" style="-fx-font-weight: bold;"/>
                <TextField fx:id="txtEmail" GridPane.columnIndex="3" GridPane.rowIndex="2" promptText="email@example.com"/>
            </GridPane>
            
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Button text="ðŸ’¾ LÆ°u khÃ¡ch hÃ ng" onAction="#luu" styleClass="btn-primary"/>
                <Button text="âŒ Há»§y" onAction="#huy" styleClass="btn-secondary"/>
            </HBox>
        </VBox>
    </TitledPane>
</VBox>
