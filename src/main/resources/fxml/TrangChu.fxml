<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.mekongfarm.controller.TrangChuController"
            styleClass="main-container">
    
    <!-- Sidebar Menu -->
    <left>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="sidebar-scroll">
            <VBox styleClass="sidebar" spacing="3" prefWidth="210">
                <padding><Insets top="15" right="8" bottom="15" left="8"/></padding>
                
                <Label text="ðŸŒ¾ MEKONG FARM" styleClass="sidebar-title"/>
                <Separator/>
                
                <!-- Menu chÃ­nh -->
                <Button fx:id="btnTrangChu" text="ðŸ“Š Trang chá»§" onAction="#moTrangChu" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnSanPham" text="ðŸ“¦ Sáº£n pháº©m" onAction="#moSanPham" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnKhachHang" text="ðŸ‘¥ KhÃ¡ch hÃ ng" onAction="#moKhachHang" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnDonHang" text="ðŸ›’ ÄÆ¡n hÃ ng" onAction="#moDonHang" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnThongKe" text="ðŸ“ˆ Thá»‘ng kÃª" onAction="#moThongKe" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnTruyXuat" text="ðŸ” Truy xuáº¥t" onAction="#moTruyXuat" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                
                <Separator/>
                
                <!-- NhÃ³m: KHO VÃ€ Äá»I TÃC -->
                <VBox styleClass="menu-group">
                    <Label text="ðŸ“¦ KHO - Äá»I TÃC" styleClass="menu-group-title"/>
                    <VBox fx:id="groupKho" spacing="2" styleClass="menu-group-content">
                        <Button fx:id="btnNhaCungCap" text="  ðŸ­ NhÃ  cung cáº¥p" onAction="#moNhaCungCap" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                        <Button fx:id="btnDonNhap" text="  ðŸ“¥ ÄÆ¡n nháº­p" onAction="#moDonNhap" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                        <Button fx:id="btnKho" text="  ðŸ  Kho hÃ ng" onAction="#moKho" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                    </VBox>
                </VBox>
                
                <!-- NhÃ³m: TÃ€I CHÃNH -->
                <VBox styleClass="menu-group">
                    <Label text="ðŸ’° TÃ€I CHÃNH" styleClass="menu-group-title"/>
                    <VBox fx:id="groupTaiChinh" spacing="2" styleClass="menu-group-content">
                        <Button fx:id="btnCongNo" text="  ðŸ’° CÃ´ng ná»£" onAction="#moCongNo" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                        <Button fx:id="btnLaiLo" text="  ðŸ“Š LÃ£i/Lá»—" onAction="#moLaiLo" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                    </VBox>
                </VBox>
                
                <!-- NhÃ³m: Sáº¢N XUáº¤T -->
                <VBox styleClass="menu-group">
                    <Label text="ðŸ­ Sáº¢N XUáº¤T" styleClass="menu-group-title"/>
                    <VBox fx:id="groupSanXuat" spacing="2" styleClass="menu-group-content">
                        <Button fx:id="btnMuaVu" text="  ðŸŒ¾ MÃ¹a vá»¥" onAction="#moMuaVu" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                        <Button fx:id="btnGiaVung" text="  ðŸ—ºï¸ GiÃ¡ vÃ¹ng" onAction="#moGiaVung" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                        <Button fx:id="btnQuanLyTruyXuat" text="  ðŸ” QL Truy xuáº¥t" onAction="#moQuanLyTruyXuat" 
                                styleClass="sidebar-btn-sub" maxWidth="Infinity"/>
                    </VBox>
                </VBox>
                
                <Separator/>
                
                <!-- Tiá»‡n Ã­ch -->
                <Button fx:id="btnTroLyAI" text="ðŸ¤– Trá»£ lÃ½ AI" onAction="#moTroLyAI" 
                        styleClass="sidebar-btn-ai" maxWidth="Infinity"/>
                <Button fx:id="btnQuanLyUser" text="ðŸ‘¥ Quáº£n lÃ½ User" onAction="#moQuanLyUser" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button fx:id="btnLichSu" text="ðŸ“œ Lá»‹ch sá»­" onAction="#moLichSu" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                
                <Separator/>
                
                <!-- User info -->
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label fx:id="lblNguoiDung" text="ðŸ‘¤ Admin" styleClass="user-info"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button fx:id="btnNotification" text="ðŸ””" onAction="#moThongBao" 
                            style="-fx-background-color: transparent; -fx-font-size: 16px;"/>
                </HBox>
                <Button text="ðŸ”‘ Äá»•i máº­t kháº©u" onAction="#moDoiMatKhau" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button text="âš™ï¸ CÃ i Ä‘áº·t" onAction="#moCaiDat" 
                        styleClass="sidebar-btn" maxWidth="Infinity"/>
                <Button text="ðŸšª ÄÄƒng xuáº¥t" onAction="#dangXuat" 
                        styleClass="sidebar-btn-logout" maxWidth="Infinity"/>
            </VBox>
        </ScrollPane>
    </left>
    
    <!-- Main Content -->
    <center>
        <StackPane fx:id="contentArea" styleClass="content-area">
            <!-- Dashboard máº·c Ä‘á»‹nh -->
            <ScrollPane fitToWidth="true" hbarPolicy="NEVER" style="-fx-background-color: transparent;">
                <VBox spacing="20" alignment="TOP_CENTER">
                    <padding><Insets top="25" right="25" bottom="25" left="25"/></padding>
                    
                    <!-- Header -->
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Label text="ðŸŒ¾ Tá»”NG QUAN Há»† THá»NG" styleClass="page-title"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        
                        <!-- Global Search -->
                        <TextField fx:id="txtTimKiemToanCuc" promptText="ðŸ” TÃ¬m kiáº¿m..." 
                                   prefWidth="200" onAction="#timKiemToanCuc"/>
                        
                        <Label fx:id="lblNgay" text="" style="-fx-text-fill: #64748b; -fx-font-size: 13px;"/>
                        <Button text="ðŸ”„" onAction="#lamMoi" styleClass="btn-icon" 
                                style="-fx-font-size: 16px;"/>
                        <Button text="ðŸ“Š BÃ¡o cÃ¡o thÃ¡ng" onAction="#xuatBaoCaoThang" 
                                style="-fx-background-color: #0f766e; -fx-text-fill: white;"/>
                    </HBox>
                    
                    <!-- Cards thá»‘ng kÃª chÃ­nh -->
                    <HBox spacing="15" alignment="CENTER">
                        <VBox styleClass="stat-card card-green" alignment="CENTER" spacing="5" prefWidth="150">
                            <Label text="ðŸ“¦" style="-fx-font-size: 24px;"/>
                            <Label fx:id="lblTongSP" text="0" styleClass="stat-number"/>
                            <Label text="Sáº£n pháº©m" styleClass="stat-label"/>
                        </VBox>
                        <VBox styleClass="stat-card card-blue" alignment="CENTER" spacing="5" prefWidth="150">
                            <Label text="ðŸ‘¥" style="-fx-font-size: 24px;"/>
                            <Label fx:id="lblTongKH" text="0" styleClass="stat-number"/>
                            <Label text="KhÃ¡ch hÃ ng" styleClass="stat-label"/>
                        </VBox>
                        <VBox styleClass="stat-card card-orange" alignment="CENTER" spacing="5" prefWidth="150">
                            <Label text="ðŸ›’" style="-fx-font-size: 24px;"/>
                            <Label fx:id="lblTongDH" text="0" styleClass="stat-number"/>
                            <Label text="ÄÆ¡n hÃ ng" styleClass="stat-label"/>
                        </VBox>
                        <VBox styleClass="stat-card card-purple" alignment="CENTER" spacing="5" prefWidth="150">
                            <Label text="ðŸ’°" style="-fx-font-size: 24px;"/>
                            <Label fx:id="lblDoanhThu" text="0 VNÄ" styleClass="stat-number-small"/>
                            <Label text="Doanh thu" styleClass="stat-label"/>
                        </VBox>
                        <VBox fx:id="cardCongNo" styleClass="stat-card" alignment="CENTER" spacing="5" prefWidth="150" 
                              style="-fx-background-color: #fef3c7;">
                            <Label text="ðŸ“‹" style="-fx-font-size: 24px;"/>
                            <Label fx:id="lblCongNo" text="0 VNÄ" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #b45309;"/>
                            <Label text="CÃ´ng ná»£" style="-fx-text-fill: #92400e;"/>
                        </VBox>
                    </HBox>
                    
                    <!-- HÃ nh Ä‘á»™ng nhanh -->
                    <HBox spacing="10" alignment="CENTER">
                        <Button text="âž• ThÃªm Ä‘Æ¡n hÃ ng" onAction="#moDonHang" styleClass="btn-primary"/>
                        <Button text="ðŸ“¦ ThÃªm sáº£n pháº©m" onAction="#moSanPham" styleClass="btn-secondary"/>
                        <Button text="ðŸ‘¤ ThÃªm khÃ¡ch hÃ ng" onAction="#moKhachHang" styleClass="btn-secondary"/>
                        <Button text="ï¿½ Xuáº¥t Excel" onAction="#xuatExcelTongHop" styleClass="btn-secondary"/>
                    </HBox>
                    
                    <!-- Content Row -->
                    <HBox spacing="20" VBox.vgrow="ALWAYS">
                        <!-- Cá»™t trÃ¡i: Biá»ƒu Ä‘á»“ -->
                        <VBox spacing="15" HBox.hgrow="ALWAYS">
                            <VBox styleClass="chart-container" VBox.vgrow="ALWAYS">
                                <Label text="ðŸ“Š Sáº£n pháº©m theo loáº¡i" styleClass="chart-title"/>
                                <PieChart fx:id="chartLoai" prefHeight="200"/>
                            </VBox>
                            <VBox styleClass="chart-container" VBox.vgrow="ALWAYS">
                                <Label text="ðŸ“ˆ Sáº£n pháº©m theo tá»‰nh" styleClass="chart-title"/>
                                <BarChart fx:id="chartTinh" prefHeight="180">
                                    <xAxis><CategoryAxis/></xAxis>
                                    <yAxis><NumberAxis/></yAxis>
                                </BarChart>
                            </VBox>
                        </VBox>
                        
                        <!-- Cá»™t pháº£i: ThÃ´ng tin nhanh -->
                        <VBox spacing="15" minWidth="280" maxWidth="300">
                            <!-- ThÃ´ng bÃ¡o -->
                            <VBox styleClass="form-pane" spacing="8">
                                <Label text="ðŸ”” THÃ”NG BÃO" style="-fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
                                <VBox fx:id="boxThongBao" spacing="5">
                                    <Label text="â€¢ Há»‡ thá»‘ng hoáº¡t Ä‘á»™ng bÃ¬nh thÆ°á»ng" style="-fx-text-fill: #16a34a;"/>
                                </VBox>
                            </VBox>
                            
                            <!-- MÃ¹a vá»¥ hiá»‡n táº¡i -->
                            <VBox styleClass="form-pane" spacing="8">
                                <Label text="ðŸŒ¾ MÃ™A Vá»¤ HIá»†N Táº I" style="-fx-font-weight: bold; -fx-text-fill: #166534;"/>
                                <Label fx:id="lblMuaVu" text="Äang cáº­p nháº­t..." style="-fx-text-fill: #64748b;"/>
                            </VBox>
                            
                            <!-- ÄÆ¡n hÃ ng gáº§n Ä‘Ã¢y -->
                            <VBox styleClass="form-pane" spacing="8" VBox.vgrow="ALWAYS">
                                <Label text="ðŸ“‹ ÄÆ N HÃ€NG Gáº¦N ÄÃ‚Y" style="-fx-font-weight: bold; -fx-text-fill: #7e22ce;"/>
                                <VBox fx:id="boxDonHangGanDay" spacing="5">
                                    <Label text="ChÆ°a cÃ³ Ä‘Æ¡n hÃ ng" style="-fx-text-fill: #94a3b8; -fx-font-style: italic;"/>
                                </VBox>
                            </VBox>
                            
                            <!-- Tá»“n kho tháº¥p -->
                            <VBox styleClass="form-pane" spacing="8">
                                <Label text="âš ï¸ Tá»’N KHO THáº¤P" style="-fx-font-weight: bold; -fx-text-fill: #dc2626;"/>
                                <VBox fx:id="boxTonKhoThap" spacing="5">
                                    <Label text="KhÃ´ng cÃ³ cáº£nh bÃ¡o" style="-fx-text-fill: #16a34a;"/>
                                </VBox>
                            </VBox>
                            
                            <!-- Top sáº£n pháº©m bÃ¡n cháº¡y -->
                            <VBox styleClass="form-pane" spacing="8">
                                <Label text="ðŸ”¥ BÃN CHáº Y NHáº¤T" style="-fx-font-weight: bold; -fx-text-fill: #ea580c;"/>
                                <VBox fx:id="boxTopBanChay" spacing="5"/>
                            </VBox>

                            <!-- Sáº¯p háº¿t háº¡n -->
                            <VBox styleClass="form-pane" spacing="8">
                                <Label text="â³ Sáº®P Háº¾T Háº N" style="-fx-font-weight: bold; -fx-text-fill: #b91c1c;"/>
                                <VBox fx:id="boxSapHetHan" spacing="5"/>
                            </VBox>
                        </VBox>
                    </HBox>
                </VBox>
            </ScrollPane>
        </StackPane>
    </center>
</BorderPane>
