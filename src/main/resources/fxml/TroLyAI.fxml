<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.mekongfarm.controller.TroLyAIController"
      spacing="15" styleClass="content-page">
    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ¤– TRá»¢ LÃ AI NÃ”NG NGHIá»†P" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label text="Powered by Gemini AI" style="-fx-font-size: 12px; -fx-text-fill: #64748b;"/>
    </HBox>
    
    <!-- Tab pane cho 3 chá»©c nÄƒng -->
    <TabPane fx:id="tabPane" VBox.vgrow="ALWAYS" style="-fx-background-color: transparent;">
        <!-- Tab Chatbot -->
        <Tab text="ðŸ’¬ Chatbot TÆ° Váº¥n" closable="false">
            <VBox spacing="12">
                <padding><Insets top="15" right="15" bottom="15" left="15"/></padding>
                
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f0f9ff; -fx-padding: 10; -fx-background-radius: 8;">
                    <Label text="ðŸŒ¾" style="-fx-font-size: 20px;"/>
                    <Label text="Há»i Ä‘Ã¡p vá» ká»¹ thuáº­t nÃ´ng nghiá»‡p vÃ¹ng ÄBSCL - Há»— trá»£ 24/7" style="-fx-text-fill: #0369a1;"/>
                </HBox>
                
                <ScrollPane fx:id="scrollChat" VBox.vgrow="ALWAYS" style="-fx-background-color: #f8fafc; -fx-background-radius: 8;">
                    <VBox fx:id="chatBox" spacing="10" style="-fx-padding: 15;">
                    </VBox>
                </ScrollPane>
                
                <HBox spacing="10" alignment="CENTER">
                    <TextField fx:id="txtMessage" promptText="ðŸ’¬ Nháº­p cÃ¢u há»i cá»§a báº¡n..." HBox.hgrow="ALWAYS" 
                               onAction="#guiTinNhan" style="-fx-pref-height: 40px; -fx-font-size: 14px;"/>
                    <Button text="ðŸ“¤ Gá»­i" onAction="#guiTinNhan" styleClass="btn-primary" style="-fx-pref-height: 40px;"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER">
                    <Button text="ðŸŒ¾ Há»i vá» lÃºa gáº¡o" onAction="#hoiVeLua" styleClass="btn-secondary"/>
                    <Button text="ðŸ¥­ Há»i vá» trÃ¡i cÃ¢y" onAction="#hoiVeTraiCay" styleClass="btn-secondary"/>
                    <Button text="ðŸ¦ Há»i vá» thá»§y sáº£n" onAction="#hoiVeThuySan" styleClass="btn-secondary"/>
                    <Button text="ðŸŒ± Há»i vá» mÃ¹a vá»¥" onAction="#hoiVeMuaVu" styleClass="btn-secondary"/>
                </HBox>
            </VBox>
        </Tab>
        
        <!-- Tab Nháº­n diá»‡n áº£nh -->
        <Tab text="ðŸ“· Nháº­n Diá»‡n áº¢nh" closable="false">
            <VBox spacing="15" alignment="CENTER">
                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #ecfdf5; -fx-padding: 10; -fx-background-radius: 8;">
                    <Label text="ðŸ“·" style="-fx-font-size: 20px;"/>
                    <Label text="Upload áº£nh nÃ´ng sáº£n Ä‘á»ƒ AI nháº­n diá»‡n loáº¡i, cháº¥t lÆ°á»£ng vÃ  gá»£i Ã½ giÃ¡" style="-fx-text-fill: #166534;"/>
                </HBox>
                
                <HBox spacing="25" alignment="CENTER">
                    <VBox alignment="CENTER" spacing="10" style="-fx-background-color: #f1f5f9; -fx-padding: 20; -fx-background-radius: 12;">
                        <ImageView fx:id="imgPreview" fitHeight="220" fitWidth="220" preserveRatio="true"/>
                        <Button text="ðŸ“ Chá»n áº£nh" onAction="#chonAnh" styleClass="btn-primary"/>
                        <Label fx:id="lblFileName" text="ChÆ°a chá»n file" style="-fx-text-fill: #64748b;"/>
                    </VBox>
                    
                    <VBox spacing="10" HBox.hgrow="ALWAYS" minWidth="350">
                        <Label text="ðŸ“Š Káº¿t quáº£ nháº­n diá»‡n:" style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="txtKetQuaAnh" prefHeight="280" wrapText="true" editable="false"
                                  promptText="Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y sau khi phÃ¢n tÃ­ch..." style="-fx-font-size: 13px;"/>
                        <Button text="ðŸ” PhÃ¢n tÃ­ch áº£nh" onAction="#phanTichAnh" styleClass="btn-primary"/>
                    </VBox>
                </HBox>
            </VBox>
        </Tab>
        
        <!-- Tab PhÃ¢n tÃ­ch dá»¯ liá»‡u -->
        <Tab text="ðŸ“Š PhÃ¢n TÃ­ch Dá»¯ Liá»‡u" closable="false">
            <VBox spacing="15">
                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                
                <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #fef3c7; -fx-padding: 10; -fx-background-radius: 8;">
                    <Label text="ðŸ“Š" style="-fx-font-size: 20px;"/>
                    <Label text="AI phÃ¢n tÃ­ch dá»¯ liá»‡u kinh doanh vÃ  Ä‘Æ°a ra dá»± Ä‘oÃ¡n thÃ´ng minh" style="-fx-text-fill: #92400e;"/>
                </HBox>
                
                <HBox spacing="10" alignment="CENTER">
                    <Button text="ðŸ“ˆ PhÃ¢n tÃ­ch doanh thu" onAction="#phanTichDoanhThu" styleClass="btn-secondary"/>
                    <Button text="ðŸ“¦ PhÃ¢n tÃ­ch sáº£n pháº©m" onAction="#phanTichSanPham" styleClass="btn-secondary"/>
                    <Button text="ðŸ‘¥ PhÃ¢n tÃ­ch khÃ¡ch hÃ ng" onAction="#phanTichKhachHang" styleClass="btn-secondary"/>
                    <Button text="ðŸ“Š Dá»± bÃ¡o xu hÆ°á»›ng" onAction="#duBaoXuHuong" styleClass="btn-secondary"/>
                </HBox>
                
                <HBox spacing="15" VBox.vgrow="ALWAYS">
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="ðŸ“¥ Dá»¯ liá»‡u Ä‘áº§u vÃ o:" style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="txtDuLieu" VBox.vgrow="ALWAYS" wrapText="true"
                                  promptText="Nháº­p hoáº·c dÃ¡n dá»¯ liá»‡u cáº§n phÃ¢n tÃ­ch..."/>
                    </VBox>
                    
                    <VBox spacing="5" HBox.hgrow="ALWAYS">
                        <Label text="ðŸ“¤ Káº¿t quáº£ phÃ¢n tÃ­ch:" style="-fx-font-weight: bold;"/>
                        <TextArea fx:id="txtKetQuaPhanTich" VBox.vgrow="ALWAYS" wrapText="true" editable="false"
                                  promptText="Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y..." style="-fx-background-color: #f0fdf4;"/>
                    </VBox>
                </HBox>
                
                <Button text="ðŸ¤– PhÃ¢n tÃ­ch vá»›i AI" onAction="#phanTichDuLieu" styleClass="btn-primary"/>
            </VBox>
        </Tab>
    </TabPane>
</VBox>
