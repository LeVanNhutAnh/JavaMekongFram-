<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.mekongfarm.controller.DonHangController"
      spacing="15" styleClass="content-page" 
      style="-fx-background-color: #f5f5f5;">
    <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
    
    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="15">
        <Label text="ðŸ›’ QUáº¢N LÃ ÄÆ N HÃ€NG" styleClass="page-title"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Label fx:id="lblTongDon" text="0 Ä‘Æ¡n hÃ ng" style="-fx-font-size: 14px; -fx-text-fill: #64748b;"/>
    </HBox>
    
    <!-- Thá»‘ng kÃª nhanh -->
    <HBox spacing="15" alignment="CENTER">
        <VBox styleClass="stat-card card-blue" alignment="CENTER" spacing="3" prefWidth="145">
            <Label text="ðŸ“‹" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblTongDonHang" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #1e40af;"/>
            <Label text="Tá»•ng Ä‘Æ¡n hÃ ng" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-green" alignment="CENTER" spacing="3" prefWidth="145">
            <Label text="âœ…" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblDonHoanThanh" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #166534;"/>
            <Label text="HoÃ n thÃ nh" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-orange" alignment="CENTER" spacing="3" prefWidth="145">
            <Label text="â³" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblDonDangXuLy" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #c2410c;"/>
            <Label text="Äang xá»­ lÃ½" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox styleClass="stat-card card-purple" alignment="CENTER" spacing="3" prefWidth="145">
            <Label text="ðŸ’°" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblTongDoanhThu" text="0 VNÄ" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #7e22ce;"/>
            <Label text="Tá»•ng doanh thu" style="-fx-font-size: 11px; -fx-text-fill: #374151;"/>
        </VBox>
        <VBox fx:id="cardHomNay" styleClass="stat-card" alignment="CENTER" spacing="3" prefWidth="145"
              style="-fx-background-color: #e0f2fe;">
            <Label text="ðŸ“…" style="-fx-font-size: 20px;"/>
            <Label fx:id="lblDonHomNay" text="0" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #0369a1;"/>
            <Label text="HÃ´m nay" style="-fx-font-size: 11px; -fx-text-fill: #0c4a6e;"/>
        </VBox>
    </HBox>
    
    <!-- Thanh cÃ´ng cá»¥ -->
    <HBox spacing="10" alignment="CENTER_LEFT" style="-fx-background-color: #f8fafc; -fx-padding: 10; -fx-background-radius: 8;">
        <ComboBox fx:id="cboTrangThai" promptText="ðŸ“Š Tráº¡ng thÃ¡i" prefWidth="160"/>
        <DatePicker fx:id="dpTuNgay" promptText="Tá»« ngÃ y"/>
        <DatePicker fx:id="dpDenNgay" promptText="Äáº¿n ngÃ y"/>
        <Button text="ðŸ”„ LÃ m má»›i" onAction="#lamMoi" styleClass="btn-secondary"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“¥ Nháº­p Excel" onAction="#nhapExcel" styleClass="btn-export"/>
        <Button text="ï¿½ Xuáº¥t Excel" onAction="#xuatExcel" styleClass="btn-export"/>
        <Button text="ï¿½ðŸ“„ Xuáº¥t PDF" onAction="#xuatPDF" styleClass="btn-export"/>
        <Button text="ðŸ–¨ï¸ In Ä‘Æ¡n" onAction="#inDonHang" styleClass="btn-export"/>
        <Button text="âž• Táº¡o Ä‘Æ¡n má»›i" onAction="#taoDonMoi" styleClass="btn-primary"/>
    </HBox>
    
    <!-- Báº£ng Ä‘Æ¡n hÃ ng -->
    <TableView fx:id="tableDonHang" VBox.vgrow="ALWAYS" minHeight="300" prefHeight="400" 
               styleClass="data-table">
        <placeholder>
            <Label text="KhÃ´ng cÃ³ Ä‘Æ¡n hÃ ng nÃ o" style="-fx-text-fill: #94a3b8; -fx-font-style: italic;"/>
        </placeholder>
        <columns>
            <TableColumn text="MÃ£ ÄH" prefWidth="80"><cellValueFactory><PropertyValueFactory property="maDH"/></cellValueFactory></TableColumn>
            <TableColumn text="KhÃ¡ch hÃ ng" prefWidth="170"><cellValueFactory><PropertyValueFactory property="tenKhachHang"/></cellValueFactory></TableColumn>
            <TableColumn text="NgÃ y Ä‘áº·t" prefWidth="130"><cellValueFactory><PropertyValueFactory property="ngayDatFormat"/></cellValueFactory></TableColumn>
            <TableColumn text="ThÃ nh tiá»n" prefWidth="130"><cellValueFactory><PropertyValueFactory property="thanhTienFormat"/></cellValueFactory></TableColumn>
            <TableColumn text="Tráº¡ng thÃ¡i" prefWidth="110"><cellValueFactory><PropertyValueFactory property="trangThaiHienThi"/></cellValueFactory></TableColumn>
            <TableColumn text="NgÆ°á»i táº¡o" prefWidth="120"><cellValueFactory><PropertyValueFactory property="tenNguoiDung"/></cellValueFactory></TableColumn>
            <TableColumn fx:id="colAction" text="Thao tÃ¡c" prefWidth="140"/>
        </columns>
    </TableView>
    
    <!-- Form táº¡o Ä‘Æ¡n hÃ ng -->
    <TitledPane fx:id="paneForm" text="ðŸ“ Táº¡o Ä‘Æ¡n hÃ ng má»›i" expanded="false" styleClass="form-pane" maxHeight="500">
        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
            <VBox spacing="12">
                <padding><Insets top="15" right="15" bottom="15" left="15"/></padding>
            <HBox spacing="20">
                <VBox spacing="5">
                    <Label text="MÃ£ Ä‘Æ¡n hÃ ng:" style="-fx-font-weight: bold;"/>
                    <TextField fx:id="txtMaDH" editable="false" prefWidth="100" style="-fx-background-color: #f1f5f9;"/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="KhÃ¡ch hÃ ng:" style="-fx-font-weight: bold;"/>
                    <ComboBox fx:id="cboKhachHang" prefWidth="250" promptText="Chá»n khÃ¡ch hÃ ng..."/>
                </VBox>
                <VBox spacing="5" HBox.hgrow="ALWAYS">
                    <Label text="Ghi chÃº:"/>
                    <TextField fx:id="txtGhiChu" prefWidth="280" promptText="Ghi chÃº Ä‘Æ¡n hÃ ng..."/>
                </VBox>
            </HBox>
            
            <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: #ecfdf5; -fx-padding: 10; -fx-background-radius: 6;">
                <Label text="âž• ThÃªm sáº£n pháº©m:" style="-fx-font-weight: bold;"/>
                <ComboBox fx:id="cboSanPham" prefWidth="200" promptText="Chá»n sáº£n pháº©m"/>
                <TextField fx:id="txtSoLuong" prefWidth="80" promptText="Sá»‘ lÆ°á»£ng"/>
                <TextField fx:id="txtDonGiaBan" prefWidth="120" promptText="ÄÆ¡n giÃ¡ (tÃ¹y chá»n)"/>
                <Button text="âž• ThÃªm vÃ o Ä‘Æ¡n" onAction="#themSanPham" styleClass="btn-secondary"/>
            </HBox>
            
            <TableView fx:id="tableChiTiet" prefHeight="160" styleClass="data-table">
                <columns>
                    <TableColumn text="Sáº£n pháº©m" prefWidth="220"><cellValueFactory><PropertyValueFactory property="tenSanPham"/></cellValueFactory></TableColumn>
                    <TableColumn text="Sá»‘ lÆ°á»£ng" prefWidth="90"><cellValueFactory><PropertyValueFactory property="soLuong"/></cellValueFactory></TableColumn>
                    <TableColumn text="ÄÆ¡n giÃ¡" prefWidth="110"><cellValueFactory><PropertyValueFactory property="donGiaFormat"/></cellValueFactory></TableColumn>
                    <TableColumn text="ThÃ nh tiá»n" prefWidth="120"><cellValueFactory><PropertyValueFactory property="thanhTienFormat"/></cellValueFactory></TableColumn>
                </columns>
            </TableView>
            
            <HBox spacing="20" alignment="CENTER_RIGHT">
                <Label fx:id="lblTongTien" text="ðŸ’° Tá»•ng: 0 VNÄ" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #16a34a;"/>
                <Button text="ðŸ’¾ LÆ°u Ä‘Æ¡n hÃ ng" onAction="#luuDon" styleClass="btn-primary"/>
                <Button text="âŒ Há»§y" onAction="#huy" styleClass="btn-secondary"/>
            </HBox>
            </VBox>
        </ScrollPane>
    </TitledPane>
</VBox>
